(this["webpackJsonphacker-news-interface"]=this["webpackJsonphacker-news-interface"]||[]).push([[0],{33:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),o=n(23),a=n.n(o),r=n(13),i=(n(33),n(34),n(5)),j=n(4),m="https://hacker-news.firebaseio.com/v0",l=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},b=function(e){return fetch("".concat(m,"/item/").concat(e,".json"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(l)},u=function(){return fetch("".concat(m,"/newstories.json"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(l).then((function(e){return Promise.all(e.slice(0,100).map((function(e){return b(e)})))}))},O=function(e){return Promise.all(e.map((function(e){return b(e)})))},d=n(1);var h=function(e){var t=Object(j.f)().pathname;return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{className:"header__title",children:"Hacker News"}),"/"===t?Object(d.jsx)("button",{type:"button",className:"refresh-button",onClick:function(){e.onStoriesUpdate()}}):Object(d.jsx)(r.b,{to:"/",className:"back-button"})]})},p=n.p+"static/media/score-icon.410ea62d.svg",x=function(e){var t=new Date(1e3*e),n=t.getFullYear(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+s+" "+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()};var f=function(e){return Object(d.jsxs)(r.b,{to:"/story",className:"story",onClick:function(){e.onOpenStory(e.story)},children:[Object(d.jsxs)("div",{className:"story__top-wrapper",children:[Object(d.jsx)("h2",{className:"story__title",children:e.story.title}),Object(d.jsxs)("p",{className:"story__text",children:[Object(d.jsx)("img",{className:"story__score-icon",src:p,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430"}),e.story.score]})]}),Object(d.jsxs)("div",{className:"story__down-wrapper",children:[Object(d.jsxs)("p",{className:"story__text",children:[Object(d.jsx)("span",{className:"text-accent",children:"By: "}),e.story.by]}),Object(d.jsxs)("p",{className:"story__text",children:[Object(d.jsx)("span",{className:"text-accent",children:"Posted at: "}),x(e.story.time)]})]})]})},y=n(43);var S=function(e){return Object(d.jsx)("main",{className:"content",children:e.isSpinnerActive?Object(d.jsx)(y.a,{className:"spinner",animation:"border",variant:"dark"}):e.stories.map((function(t){if(null!==t)return Object(d.jsx)(f,{story:t,onOpenStory:e.onOpenStory},t.id)}))})},N=n(46),g=n(44),_=n(45);var v=function(e){return Object(d.jsx)(d.Fragment,{children:e.kidsComments.map((function(e){return Object(d.jsx)(k,{comment:e},e.id)}))})};var k=function(e){var t=Object(s.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],a=Object(s.useState)([]),r=Object(i.a)(a,2),j=r[0],m=r[1],l=Object(s.useState)(!1),b=Object(i.a)(l,2),u=b[0],h=b[1];return Object(d.jsxs)(_.a.Item,{children:[Object(d.jsx)(N.a.Text,{children:e.comment.text}),Object(d.jsxs)("div",{className:"comment-info",children:[Object(d.jsxs)(N.a.Text,{children:[Object(d.jsx)("span",{className:"text-accent",children:"by"})," ",e.comment.by,Object(d.jsx)("span",{className:"text-accent",children:" at"})," ",x(e.comment.time)]}),e.comment.kids&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{type:"button",className:"show-more-button",onClick:function(){o(!c),h(!0),O(e.comment.kids).then((function(e){h(!1),m(e)})).catch((function(e){h(!1),console.log(e)}))}})})]}),e.comment.kids&&c&&Object(d.jsx)(d.Fragment,{children:u?Object(d.jsx)(y.a,{animation:"border",variant:"dark"}):Object(d.jsx)(v,{kidsComments:j})})]})};var C=function(e){var t=Object(s.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],a=Object(s.useState)(!1),r=Object(i.a)(a,2),j=r[0],m=r[1];function l(){o(!c)}return Object(s.useEffect)((function(){e.onUpdateComments(e.openStory)}),[c]),Object(s.useEffect)((function(){setTimeout((function(){m(!j),e.onUpdateComments(e.openStory)}),6e4)}),[j]),Object(d.jsxs)("main",{className:"content",children:[Object(d.jsx)(N.a,{className:"story-card",children:Object(d.jsxs)(N.a.Body,{children:[Object(d.jsx)(N.a.Title,{className:"story-card__title",children:e.openStory.title}),Object(d.jsxs)(N.a.Text,{children:[Object(d.jsx)("span",{className:"text-accent",children:"Posted "}),x(e.openStory.time),Object(d.jsx)("span",{className:"text-accent",children:" by "}),e.openStory.by]}),Object(d.jsx)("a",{href:e.openStory.url,target:"_blank",rel:"noreferrer",children:Object(d.jsx)(g.a,{variant:"primary",children:"Learn more"})})]})}),Object(d.jsx)(N.a,{className:"story-comments",children:e.openStory.kids?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(N.a.Header,{className:"story-comments__header",children:[Object(d.jsxs)("p",{className:"story-comments__title",children:["\u0421ommented ",e.openStory.kids.length," times"]}),Object(d.jsx)("button",{type:"button",className:"refresh-button refresh-button__small",onClick:l})]}),Object(d.jsx)(_.a,{variant:"flush",children:e.openStoryComments.map((function(e){return Object(d.jsx)(k,{comment:e},e.id)}))})]}):Object(d.jsxs)(N.a.Header,{className:"story-comments__header",children:[Object(d.jsx)("p",{className:"story-comments__title",children:"No comments yet :("}),Object(d.jsx)("button",{type:"button",className:"refresh-button refresh-button__small",onClick:l})]})})]})};var w=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)({}),a=Object(i.a)(o,2),r=a[0],m=a[1],l=Object(s.useState)([]),b=Object(i.a)(l,2),p=b[0],x=b[1],f=Object(s.useState)(!1),y=Object(i.a)(f,2),N=y[0],g=y[1],_=Object(s.useState)(!1),v=Object(i.a)(_,2),k=v[0],w=v[1],T=Object(s.useState)(!1),J=Object(i.a)(T,2),I=J[0],E=J[1];Object(s.useEffect)((function(){sessionStorage.getItem("openStory")&&m(JSON.parse(sessionStorage.getItem("openStory"))),sessionStorage.getItem("openStoryComments")&&x(JSON.parse(sessionStorage.getItem("openStoryComments"))),g(!0),u().then((function(e){g(!1),c(e)})).catch((function(e){g(!1),console.log(e)}))}),[k]),Object(s.useEffect)((function(){setTimeout((function(){E(!I),u().then((function(e){g(!1),c(e)})).catch((function(e){g(!1),console.log(e)}))}),6e4)}),[I]);var F=function(e){e.kids&&O(e.kids).then((function(e){x(e),sessionStorage.setItem("openStoryComments",JSON.stringify(e))})).catch((function(e){console.log(e)}))};return Object(d.jsxs)("div",{className:"page",children:[Object(d.jsx)(h,{onStoriesUpdate:function(){w(!k)}}),Object(d.jsxs)(j.c,{children:[Object(d.jsx)(j.a,{exact:!0,path:"/",children:Object(d.jsx)(S,{stories:n,onOpenStory:function(e){m(e),sessionStorage.setItem("openStory",JSON.stringify(e)),F(e)},isSpinnerActive:N})}),Object(d.jsx)(j.a,{path:"/story",children:Object(d.jsx)(C,{openStory:r,openStoryComments:p,onUpdateComments:F})})]})]})};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(r.a,{children:Object(d.jsx)(w,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4f65083f.chunk.js.map